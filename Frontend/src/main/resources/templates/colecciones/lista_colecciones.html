<html th:replace="~{layout/base::html}">
<head>
    <th:block th:fragment="styles">
        <link th:href="@{/css/colecciones/coleccionesSistema.css}" rel="stylesheet">
    </th:block>
</head>

<div th:fragment="contenido" class="row">

    <span id="flash-data"
          hidden
          th:attr="data-mensaje=${mensaje}, data-tipo=${tipoMensaje}"></span>

    <h1>Colecciones disponibles</h1>

    <!-- Estado vac√≠o (solo si no hay colecciones ni reci√©n creada) -->
    <div th:if="${(colecciones == null or #lists.isEmpty(colecciones)) and coleccionCreada == null}"
         class="grid empty-grid">
        <div class="card empty-card">
            <div class="card-header">üóÇÔ∏è Sin colecciones disponibles</div>
            <div class="card-details">
                <p class="muted">No encontramos colecciones para mostrar en este momento.</p>
            </div>
        </div>
    </div>

    <!-- Grid -->
    <div class="grid"
         th:unless="${#lists.isEmpty(colecciones) and coleccionCreada == null}">

        <th:block th:if="${coleccionCreada}">
            <div class="highlight-first"
                 th:id="'row-col-' + ${coleccionCreada.handle}">
                <div th:insert="~{colecciones/fragments/coleccion-card :: card(coleccion=${coleccionCreada})}"></div>
            </div>
        </th:block>

        <th:block th:each="col : ${colecciones}">
            <th:block th:if="${coleccionCreada == null or col.handle != coleccionCreada.handle}">
                <div th:replace="~{colecciones/fragments/coleccion-card :: card(coleccion=${col})}"></div>
            </th:block>
        </th:block>
    </div>

    <!-- Paginaci√≥n -->
    <div th:replace="~{navegacion/navegacion :: pager(
      ${page},
      ${totalPages},
      ${size},
      ${baseUrl},
      ${filtro},
      ${sort},
      ${isFirst},
      ${isLast}
    )}"></div>

    <th:block th:fragment="scripts">
        <script th:src="@{/webjars/leaflet/dist/leaflet.js}"></script>
        <script th:src="@{/js/colecciones/notificacion.js}"></script>
    </th:block>
</div>
</html>
