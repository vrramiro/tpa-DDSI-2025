<html th:replace="~{layout/base:: html}">
<head>
    <th:block th:fragment="styles">
        <link rel="stylesheet" th:href="@{/css/home/panelGestionAdmin.css}">
        <style>
            /* Estilos para el mensaje de carga */
            .loading-msg {
                color: #0056b3;
                font-weight: bold;
                margin-top: 1rem;
                display: none; /* Oculto por defecto */
                padding: 10px;
                border-radius: 5px;
                background-color: #e7f1ff;
                border: 1px solid #b8daff;
            }

            /* Animación simple de opacidad */
            .loader-visible {
                display: block !important;
                animation: fadeIn 0.5s;
            }

            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
        </style>
    </th:block>
</head>

<div class="row" th:fragment="contenido">
    <h1>Moderar contenido:</h1>
    <div class="grid">

        <a class="card" th:href="@{/solicitudes/gestion}">
            <div class="card-header"><span class="card-title">Gestionar solicitudes de eliminación</span></div>
        </a>
        <a class="card" th:href="@{/hechos/gestion_hecho}">
            <div class="card-header"><span class="card-title">Gestionar ediciones de Hechos</span></div>
        </a>
        <a class="card" th:href="@{/colecciones/gestion_colecciones}">
            <div class="card-header"><span class="card-title">Gestionar colecciones</span></div>
        </a>

        <div class="upload-box">
            <form id="form-importar" th:action="@{/panelGestion/estatica/importar}" method="post" enctype="multipart/form-data">
                <label for="archivo">Subir hechos (archivo .csv o .xlsx)</label>
                <input id="archivo" name="archivo" type="file" required accept=".csv,.xlsx">
                <button class="btn btn-primary" type="submit" id="btn-subir">Subir</button>
            </form>

            <div id="loading-message" class="alert-custom alert-info hidden">
                <span>⏳ Procesando archivo, por favor espere...</span>
            </div>

            <div id="server-message"
                 th:if="${mensaje}"
                 class="alert-custom"
                 th:classappend="${tipoMensaje == 'success'} ? 'alert-success' : 'alert-error'">
                <p th:text="${mensaje}" style="margin: 0;"></p>
            </div>
        </div>
    </div>

    <th:block th:fragment="scripts">
        <script th:src="@{/webjars/leaflet/dist/leaflet.js}"></script>
        <script th:src="@{/js/home/panelGestion.js}"></script>
    </th:block>
</div>
</html>