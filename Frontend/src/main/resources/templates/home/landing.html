<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base:: html}">
<head>
    <th:block th:fragment="styles">
        <link rel="stylesheet" th:href="@{/css/home/landing.css}">
    </th:block>
</head>
<body>

<div class="row" th:fragment="contenido">
    <div class="class-bienvenida">
        <h1>Bienvenido a MetaMapa</h1>
        <p>Una plataforma abierta y colaborativa para documentar, visualizar y analizar hechos geolocalizados de manera transparente y verificable.</p>
        <div>
            <a class="btn btn-primary" th:href="@{/hechos/explorador}">
                <button class="btn btn-primary" type="button">Explorar Mapa</button>
            </a>
        </div>
    </div>

    <div class="container-quienesSomos">
        <h2>¿Qué es MetaMapa?</h2>
        <p>Nuestra misión es proporcionar una herramienta accesible para que periodistas, investigadores, activistas y ciudadanos puedan registrar y consultar eventos importantes, creando un archivo histórico geográfico confiable.</p>
    </div>

    <div class="container-colecciones">
        <h2>Colecciones Destacadas</h2>
        <div class="features-grid">

            <div th:if="${#lists.isEmpty(coleccionesDestacadas)}" class="text-center text-muted" style="grid-column: 1 / -1;">
                No hay colecciones destacadas disponibles en este momento.
            </div>

            <a class="card feature-card text-decoration-none h-100"
               th:each="coleccion : ${coleccionesDestacadas}"
               th:href="@{'/colecciones/' + ${coleccion.handle} + '/hechos'}">
                <h3 class="text-dark pt-3" th:text="${coleccion.titulo}">
                    Título de la Colección
                </h3>

                <p class="text-muted"
                   th:text="${coleccion.descripcion != null && coleccion.descripcion.length() > 100
                              ? #strings.substring(coleccion.descripcion,0,100) + '...'
                              : coleccion.descripcion}">
                    Descripción de la colección...
                </p>

                <div class="card-footer-hecho">
                    
                    <span class="categoria-truncada fw-bold">
                        Colección Activa
                    </span>

                </div>

            </a>
        </div>
    </div>


    <div class="container-hechos">
        <div class="col-12 text-center mb-4">
            <h2 class="display-6 fw-bold text-primary">Hechos Recientes</h2>
        </div>

        <div class="features-grid">

            <div th:if="${#lists.isEmpty(hechosRecientes)}" class="text-center text-muted" style="grid-column: 1 / -1;">
                No hay hechos recientes cargados en el sistema.
            </div>

            <a class="card feature-card text-decoration-none h-100"
               th:each="hecho : ${hechosRecientes}"
               th:href="@{/hechos/{id}(id=${hecho.id})}">

                <h3 class="text-dark pt-3" th:text="${hecho.titulo}">
                    Titulo del Hecho
                </h3>

                <p class="text-muted"
                   th:text="${hecho.descripcion != null && hecho.descripcion.length() > 100
                              ? #strings.substring(hecho.descripcion,0,100) + '...'
                              : hecho.descripcion}">
                    Descripción...
                </p>

                <div class="card-footer-hecho">

                    <span class="hecho-fecha">
                        <i class="bi bi-calendar3 me-1"></i>
                        <span th:text="${#temporals.format(hecho.fechaAcontecimiento, 'dd/MM/yyyy')}">01/01/2025</span>
                    </span>

                    <span class="categoria-truncada fw-bold"
                          th:text="${hecho.categoria ?: 'General'}">
                           Categoría
                    </span>


                </div>

            </a>
        </div>
    </div>
</div>

<th:block th:fragment="scripts">
    <script th:src="@{/webjars/leaflet/dist/leaflet.js}"></script>
    <script th:src="@{/js/home/landing.js}"></script>
</th:block>

</body>
</html>