<html th:replace="~{layout/base::html}">
<head>
    <th:block th:fragment="styles">
        <link th:href="@{/css/hechos/gestionHechos.css}" rel="stylesheet">
        <style>
            .comparison-container { display: flex; gap: 20px; margin-top: 20px; }
            .comparison-box { flex: 1; border: 1px solid #ddd; padding: 20px; border-radius: 8px; background: #fff; }
            .comparison-box h3 { margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
            .field-row { margin-bottom: 15px; }
            .field-label { font-weight: bold; display: block; margin-bottom: 5px; color: #555; }
            .field-value { padding: 8px; background: #f9f9f9; border-radius: 4px; border: 1px solid #eee; }
            .highlight-change { background-color: #fff3cd; border-color: #ffeeba; }
            .actions-bar { margin-top: 30px; display: flex; justify-content: flex-end; gap: 15px; padding: 20px; background: #f8f9fa; border-radius: 8px; }
        </style>
    </th:block>
</head>

<div th:fragment="contenido">
    <main class="content-container">
        <h2>Revisión de Solicitud de Edición #<span th:text="${solicitud.id}"></span></h2>

        <div class="comparison-container">
            <div class="comparison-box">
                <h3>Hecho Actual</h3>

                <div class="field-row">
                    <span class="field-label">Título:</span>
                    <div class="field-value" th:text="${hechoOriginal.titulo}"></div>
                </div>

                <div class="field-row">
                    <span class="field-label">Categoría:</span>
                    <div class="field-value" th:text="${hechoOriginal.categoria}"></div>
                </div>

                <div class="field-row">
                    <span class="field-label">Descripción:</span>
                    <div class="field-value" th:text="${hechoOriginal.descripcion}"></div>
                </div>
            </div>

            <div class="comparison-box">
                <h3>Cambios Propuestos</h3>

                <div class="field-row">
                    <span class="field-label">Título:</span>
                    <div class="field-value"
                         th:classappend="${solicitud.nuevoTitulo != null} ? 'highlight-change'"
                         th:text="${solicitud.nuevoTitulo != null ? solicitud.nuevoTitulo : 'Sin cambios'}"></div>
                </div>

                <div class="field-row">
                    <span class="field-label">Categoría:</span>
                    <div class="field-value"
                         th:classappend="${solicitud.nuevoIdCategoria != null} ? 'highlight-change'"
                         th:text="${solicitud.nuevoIdCategoria != null ? nombreNuevaCategoria : 'Sin cambios'}"></div>
                </div>

                <div class="field-row">
                    <span class="field-label">Descripción:</span>
                    <div class="field-value"
                         th:classappend="${solicitud.nuevaDescripcion != null} ? 'highlight-change'"
                         th:text="${solicitud.nuevaDescripcion != null ? solicitud.nuevaDescripcion : 'Sin cambios'}"></div>
                </div>
            </div>
        </div>

        <div class="actions-bar">
            <a th:href="@{/hechos/gestion_hecho}" class="btn btn-secondary">Cancelar</a>

            <form th:action="@{/hechos/gestion_hecho/procesar}" method="post" style="display:inline;">
                <input type="hidden" name="idSolicitud" th:value="${solicitud.id}">
                <input type="hidden" name="accion" value="RECHAZAR">
                <button type="submit" class="btn btn-danger">Rechazar Modificación</button>
            </form>

            <form th:action="@{/hechos/gestion_hecho/procesar}" method="post" style="display:inline;">
                <input type="hidden" name="idSolicitud" th:value="${solicitud.id}">
                <input type="hidden" name="accion" value="ACEPTAR">
                <button type="submit" class="btn btn-success">Aceptar Modificación</button>
            </form>
        </div>
    </main>
</div>
</html>